{% extends "base/base.html" %}

{% block content %}
{% load static %}
  <h2>Add Meal</h2>

  <form method="post">
    {% csrf_token %}
    {{ form.as_p }}

    <h3>Foods</h3>
    {{ formset.management_form }}
    <div id="formset-area">
      {% for mf_form in formset %}
        <div class="meal-food-form">
          {{ mf_form.as_p }}
        </div>
      {% endfor %}
    </div>

    <button type="submit">Save Meal</button>
  </form>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/elo80ka/django-dynamic-formset/src/jquery.formset.js"></script>



  <script>
  $(document).ready(function() {
    $('#formset-area .meal-food-form').formset({
      addText: 'Add another food',
      deleteText: 'Remove',
      prefix: '{{ formset.prefix }}'
    });
  });
</script>
{% endblock %}
